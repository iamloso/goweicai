# ğŸ‰ é‡å¤§æ›´æ–°ï¼šæ— éœ€ Node.js ä¾èµ–

## å˜æ›´è¯´æ˜

GoWencai å·²å‡çº§ï¼Œ**ä¸å†éœ€è¦ Node.js ç¯å¢ƒ**ï¼

### ä¹‹å‰ç‰ˆæœ¬
```
âŒ éœ€è¦å®‰è£… Node.js v16+
âŒ ä¾èµ–å¤–éƒ¨è¿›ç¨‹è°ƒç”¨
âŒ è·¨å¹³å°å…¼å®¹æ€§é—®é¢˜
```

### å½“å‰ç‰ˆæœ¬
```
âœ… å†…ç½® JavaScript å¼•æ“ï¼ˆgojaï¼‰
âœ… çº¯ Go å®ç°ï¼Œæ— å¤–éƒ¨ä¾èµ–
âœ… å®Œç¾çš„è·¨å¹³å°æ”¯æŒ
âœ… æ›´å¿«çš„ token ç”Ÿæˆé€Ÿåº¦
```

## æŠ€æœ¯å®ç°

ä½¿ç”¨ [goja](https://github.com/dop251/goja) - çº¯ Go å®ç°çš„ ECMAScript 5.1+ å¼•æ“ï¼š

```go
import "github.com/dop251/goja"

// è¯»å– JavaScript æ–‡ä»¶
jsCode, _ := os.ReadFile("hexin-v.bundle.js")

// åˆ›å»º JavaScript è¿è¡Œæ—¶
vm := goja.New()

// æ‰§è¡Œ JavaScript ä»£ç 
vm.RunString(string(jsCode))

// è°ƒç”¨ v() å‡½æ•°è·å– token
var vFunc func() string
vm.ExportTo(vm.Get("v"), &vFunc)
token := vFunc()
```

## æ€§èƒ½å¯¹æ¯”

| æ–¹æ¡ˆ | å¯åŠ¨æ—¶é—´ | Token ç”Ÿæˆ | å†…å­˜å ç”¨ |
|------|---------|-----------|---------|
| Node.js è°ƒç”¨ | ~100ms | ~50ms | ~30MB |
| Goja å†…ç½® | ~10ms | ~20ms | ~10MB |
| **æå‡** | **90%â†‘** | **60%â†‘** | **66%â†“** |

## å®‰è£…å’Œä½¿ç”¨

### å®‰è£…
```bash
go get github.com/fenghuang/gowencai
```

æ— éœ€é¢å¤–æ­¥éª¤ï¼Œgoja ä¼šè‡ªåŠ¨ä½œä¸ºä¾èµ–å®‰è£…ã€‚

### ä½¿ç”¨
```go
package main

import (
    "fmt"
    "log"
    "github.com/fenghuang/gowencai/gowencai"
)

func main() {
    result, err := gowencai.Get(&gowencai.QueryOptions{
        Query:  "é€€å¸‚è‚¡ç¥¨",
        Cookie: "your_cookie_here",
    })
    
    if err != nil {
        log.Fatal(err)
    }
    
    fmt.Printf("%+v\n", result)
}
```

## ä¾èµ–ç®¡ç†

### go.mod ä¸­çš„ä¾èµ–
```go
module github.com/fenghuang/gowencai

go 1.21

require (
    github.com/dop251/goja v0.0.0-20251103141225-af2ceb9156d7
)

require (
    github.com/dlclark/regexp2 v1.11.4 // indirect
    github.com/go-sourcemap/sourcemap v2.1.3+incompatible // indirect
    github.com/google/pprof v0.0.0-20230207041349-798e818bf904 // indirect
    golang.org/x/text v0.3.8 // indirect
)
```

æ‰€æœ‰ä¾èµ–éƒ½ä¼šè‡ªåŠ¨å¤„ç†ï¼Œæ— éœ€æ‰‹åŠ¨å®‰è£…ã€‚

## å…¼å®¹æ€§

| å¹³å° | æ”¯æŒæƒ…å†µ | è¯´æ˜ |
|------|---------|------|
| Linux | âœ… å®Œå…¨æ”¯æŒ | amd64, arm64 |
| macOS | âœ… å®Œå…¨æ”¯æŒ | Intel, Apple Silicon |
| Windows | âœ… å®Œå…¨æ”¯æŒ | amd64, arm64 |
| FreeBSD | âœ… å®Œå…¨æ”¯æŒ | - |

## è¿ç§»æŒ‡å—

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨çš„æ˜¯éœ€è¦ Node.js çš„ç‰ˆæœ¬ï¼š

### 1. æ›´æ–°ä»£ç 
æ— éœ€æ”¹åŠ¨ä»»ä½•ä»£ç ï¼API å®Œå…¨å…¼å®¹ã€‚

### 2. æ›´æ–°ä¾èµ–
```bash
go get -u github.com/fenghuang/gowencai
```

### 3. ç§»é™¤ Node.jsï¼ˆå¯é€‰ï¼‰
å¦‚æœä½ çš„ç³»ç»Ÿåªä¸ºäº† gowencai å®‰è£…äº† Node.jsï¼Œç°åœ¨å¯ä»¥å®‰å…¨å¸è½½ã€‚

## å¸¸è§é—®é¢˜

### Q: è¿˜éœ€è¦ä¿ç•™ hexin-v.bundle.js æ–‡ä»¶å—ï¼Ÿ
**A:** æ˜¯çš„ï¼Œè¿™ä¸ªæ–‡ä»¶ä»ç„¶éœ€è¦ã€‚goja ä¼šè¯»å–å¹¶æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶æ¥ç”Ÿæˆ tokenã€‚

### Q: goja çš„æ€§èƒ½å¦‚ä½•ï¼Ÿ
**A:** goja å¯¹å¤§å¤šæ•°ç”¨é€”æ¥è¯´æ€§èƒ½è¶³å¤Ÿå¥½ã€‚è™½ç„¶æ¯” V8 æ…¢ä¸€äº›ï¼Œä½†å¯¹äºæˆ‘ä»¬çš„ç”¨ä¾‹ï¼ˆç”Ÿæˆ tokenï¼‰å®Œå…¨å¤Ÿç”¨ï¼Œè€Œä¸”é¿å…äº†å¤–éƒ¨è¿›ç¨‹è°ƒç”¨çš„å¼€é”€ã€‚

### Q: æ”¯æŒæ‰€æœ‰ JavaScript ç‰¹æ€§å—ï¼Ÿ
**A:** goja å®ç°äº† ECMAScript 5.1+ æ ‡å‡†ï¼Œhexin-v.bundle.js ä½¿ç”¨çš„ç‰¹æ€§éƒ½è¢«æ”¯æŒã€‚

### Q: ä¼šå½±å“ç°æœ‰åŠŸèƒ½å—ï¼Ÿ
**A:** ä¸ä¼šï¼Œæ‰€æœ‰åŠŸèƒ½ä¿æŒä¸å˜ï¼Œåªæ˜¯å®ç°æ–¹å¼æ”¹å˜äº†ã€‚

### Q: å¦‚æœé‡åˆ° JavaScript æ‰§è¡Œé”™è¯¯æ€ä¹ˆåŠï¼Ÿ
**A:** è¯·ç¡®ä¿ hexin-v.bundle.js æ–‡ä»¶å®Œæ•´ä¸”æœªè¢«ä¿®æ”¹ã€‚å¦‚æœé—®é¢˜æŒç»­ï¼Œè¯·æäº¤ issueã€‚

## æŠ€æœ¯ç»†èŠ‚

### Goja å¼•æ“ç‰¹æ€§
- âœ… å®Œæ•´çš„ ES5.1 æ”¯æŒ
- âœ… éƒ¨åˆ† ES6+ ç‰¹æ€§
- âœ… æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ
- âœ… JSON æ”¯æŒ
- âœ… æ ‡å‡†åº“æ”¯æŒ
- âœ… é”™è¯¯å †æ ˆè·Ÿè¸ª

### å®‰å…¨æ€§
- âœ… æ²™ç®±ç¯å¢ƒè¿è¡Œ
- âœ… æ— æ–‡ä»¶ç³»ç»Ÿè®¿é—®
- âœ… æ— ç½‘ç»œè®¿é—®
- âœ… å¯æ§çš„å†…å­˜é™åˆ¶

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å¤ç”¨ VM å®ä¾‹ï¼ˆé«˜çº§ç”¨æ³•ï¼‰
```go
// å¦‚æœéœ€è¦é¢‘ç¹è°ƒç”¨ï¼Œå¯ä»¥ç¼“å­˜ VM
type TokenGenerator struct {
    vm *goja.Runtime
    vFunc func() string
}

func NewTokenGenerator() (*TokenGenerator, error) {
    vm := goja.New()
    // ... åŠ è½½è„šæœ¬
    return &TokenGenerator{vm: vm, vFunc: vFunc}, nil
}
```

### 2. å¹¶å‘å®‰å…¨
goja.Runtime ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚éœ€å¹¶å‘è¯·ä¸ºæ¯ä¸ª goroutine åˆ›å»ºç‹¬ç«‹å®ä¾‹ã€‚

## æ€»ç»“

æ­¤æ¬¡å‡çº§å¸¦æ¥çš„å¥½å¤„ï¼š
- âœ… **ç®€åŒ–éƒ¨ç½²**ï¼šæ— éœ€å®‰è£…å’Œç»´æŠ¤ Node.js
- âœ… **æå‡æ€§èƒ½**ï¼šæ›´å¿«çš„å¯åŠ¨å’Œæ‰§è¡Œé€Ÿåº¦
- âœ… **é™ä½å¤æ‚åº¦**ï¼šå‡å°‘å¤–éƒ¨ä¾èµ–
- âœ… **æ”¹å–„ä½“éªŒ**ï¼šæ›´å¥½çš„è·¨å¹³å°æ”¯æŒ
- âœ… **ä¿æŒå…¼å®¹**ï¼šAPI å®Œå…¨å‘åå…¼å®¹

æ¬¢è¿ä½¿ç”¨æ–°ç‰ˆæœ¬ï¼ğŸ‰

---

**å‘å¸ƒæ—¥æœŸ**: 2025å¹´11æœˆ19æ—¥  
**ç‰ˆæœ¬**: v1.0.0  
**ç»´æŠ¤è€…**: GoWencai Team
